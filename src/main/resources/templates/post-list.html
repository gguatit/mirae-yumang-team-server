<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>게시판</title>
    <link rel="stylesheet" href="/static/css/reset.css">
    <link rel="stylesheet" href="/static/css/post-list.css">
</head>
<body>
<div class="navbar">
    <a href="/home" class="navbar-brand">스프링 게시판</a>
    <div class="navbar-menu">
        <span th:if="${username}" style="color: white;" th:text="${username} + '님'"></span>
        <a href="/posts">게시판</a>
        <a th:if="${username}" href="/mypage">마이페이지</a>
        <a th:if="${username}" href="/auth/logout">로그아웃</a>
        <a th:unless="${username}" href="/login">로그인</a>
    </div>
</div>

<div class="container">
    <div class="page-header">
        <div>
            <h1>게시판</h1>
            <div class="post-count">총 <span th:text="${posts.size()}"></span>개의 게시글</div>
        </div>
        <a th:if="${username}" href="/posts/write" class="btn">✏️ 글쓰기</a>
        <a th:unless="${username}" href="/login" class="btn">로그인 후 글쓰기</a>
    </div>

    <div class="post-table">
        <!-- 게시글 목록 테이블 -->
        <table th:if="${posts.size() > 0}">
            <thead>
            <tr>
                <th class="col-id">번호</th>
                <th class="col-title">제목</th>
                <th class="col-author">작성자</th>
                <th class="col-date">작성일</th>
                <th class="col-views">조회수</th>
            </tr>
            </thead>
            <tbody>
            <tr th:each="post, iterStat : ${posts}">
                <td class="col-id" th:text="${iterStat.count}"></td>
                <td class="col-title">
                    <a th:href="@{/posts/{id}(id=${post.id})}"
                       th:text="${post.title}"
                       class="post-title"></a>
                </td>
                <td class="col-author" th:text="${post.author}"></td>
                <td class="col-date" th:text="${#temporals.format(post.createdAt, 'yyyy-MM-dd HH:mm')}"></td>
                <td class="col-views" th:text="${post.viewCount} ?: 0"></td>
            </tr>
            </tbody>
        </table>

        <!-- 게시글이 없을 때 -->
        <div class="empty-message" th:unless="${posts.size() > 0}">
            아직 게시글이 없습니다.
        </div>
    </div>
</div>
</body>
</html>